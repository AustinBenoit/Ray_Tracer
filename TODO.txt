1. Change to work with the make file
2. refactor the code
